<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: MDL_request Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="classMDL__request-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">MDL_request Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="mdl_8h_source.html">mdl.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab04208d9a63353d65b5384b2352657ea"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__request.html#ab04208d9a63353d65b5384b2352657ea">init_with_source</a> (<a class="el" href="structMDL__key.html#a391ec4bd98fec6852a48f7856546ed3b">MDL_key::enum_mdl_namespace</a> namespace_arg, const char *db_arg, const char *name_arg, enum_mdl_type mdl_type_arg, enum_mdl_duration mdl_duration_arg, const char *src_file, uint src_line)</td></tr>
<tr class="separator:ab04208d9a63353d65b5384b2352657ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e16a57d0955ac62887ff87d46dee5ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__request.html#a4e16a57d0955ac62887ff87d46dee5ad">init_by_key_with_source</a> (const <a class="el" href="structMDL__key.html">MDL_key</a> *key_arg, enum_mdl_type mdl_type_arg, enum_mdl_duration mdl_duration_arg, const char *src_file, uint src_line)</td></tr>
<tr class="separator:a4e16a57d0955ac62887ff87d46dee5ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cc77971b2b370098d3e6d89f816180e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__request.html#a6cc77971b2b370098d3e6d89f816180e">set_type</a> (enum_mdl_type type_arg)</td></tr>
<tr class="separator:a6cc77971b2b370098d3e6d89f816180e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2eba1fb8ec80fc083ddee0b45c683294"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__request.html#a2eba1fb8ec80fc083ddee0b45c683294">is_write_lock_request</a> () const</td></tr>
<tr class="separator:a2eba1fb8ec80fc083ddee0b45c683294"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0464ab737f8f687f27626d2595a7125a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__request.html#a0464ab737f8f687f27626d2595a7125a">is_ddl_or_lock_tables_lock_request</a> () const</td></tr>
<tr class="separator:a0464ab737f8f687f27626d2595a7125a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae00606a0fc45f65d897307baaa4773c0"><td class="memItemLeft" align="right" valign="top"><a id="ae00606a0fc45f65d897307baaa4773c0"></a>
<a class="el" href="classMDL__request.html">MDL_request</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classMDL__request.html">MDL_request</a> &amp;rhs)</td></tr>
<tr class="separator:ae00606a0fc45f65d897307baaa4773c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4899c84cffa559f5490ec0bfb9e9929f"><td class="memItemLeft" align="right" valign="top"><a id="a4899c84cffa559f5490ec0bfb9e9929f"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>MDL_request</b> (const <a class="el" href="classMDL__request.html">MDL_request</a> *rhs)</td></tr>
<tr class="separator:a4899c84cffa559f5490ec0bfb9e9929f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a46c82cd2ca417fc6f1b9c63c71e47889"><td class="memItemLeft" align="right" valign="top"><a id="a46c82cd2ca417fc6f1b9c63c71e47889"></a>
static void *&#160;</td><td class="memItemRight" valign="bottom"><b>operator new</b> (size_t size, MEM_ROOT *mem_root)  throw ()</td></tr>
<tr class="separator:a46c82cd2ca417fc6f1b9c63c71e47889"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fed43bd7ebb8e9b356a1732dd274416"><td class="memItemLeft" align="right" valign="top"><a id="a6fed43bd7ebb8e9b356a1732dd274416"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>operator delete</b> (void *ptr, MEM_ROOT *mem_root)</td></tr>
<tr class="separator:a6fed43bd7ebb8e9b356a1732dd274416"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a13f9ecefea91a5355e694339ed9f7943"><td class="memItemLeft" align="right" valign="top">enum enum_mdl_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__request.html#a13f9ecefea91a5355e694339ed9f7943">type</a></td></tr>
<tr class="separator:a13f9ecefea91a5355e694339ed9f7943"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bbba71916cc45c7a3912175ef76cf69"><td class="memItemLeft" align="right" valign="top">enum enum_mdl_duration&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__request.html#a1bbba71916cc45c7a3912175ef76cf69">duration</a></td></tr>
<tr class="separator:a1bbba71916cc45c7a3912175ef76cf69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9d3b3f440b67b7665b3a2701a14e2b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMDL__request.html">MDL_request</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__request.html#ad9d3b3f440b67b7665b3a2701a14e2b2">next_in_list</a></td></tr>
<tr class="separator:ad9d3b3f440b67b7665b3a2701a14e2b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e7ba7a3d2a1b9374f0dbe0be197854a"><td class="memItemLeft" align="right" valign="top"><a id="a9e7ba7a3d2a1b9374f0dbe0be197854a"></a>
<a class="el" href="classMDL__request.html">MDL_request</a> **&#160;</td><td class="memItemRight" valign="bottom"><b>prev_in_list</b></td></tr>
<tr class="separator:a9e7ba7a3d2a1b9374f0dbe0be197854a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99421002fe2ea1580766846c0ef339ae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classMDL__ticket.html">MDL_ticket</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__request.html#a99421002fe2ea1580766846c0ef339ae">ticket</a></td></tr>
<tr class="separator:a99421002fe2ea1580766846c0ef339ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab30e06e36d9191120575cc0c0402554a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structMDL__key.html">MDL_key</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMDL__request.html#ab30e06e36d9191120575cc0c0402554a">key</a></td></tr>
<tr class="separator:ab30e06e36d9191120575cc0c0402554a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa55387aeb49a4f81ecaa87fd481a310b"><td class="memItemLeft" align="right" valign="top"><a id="aa55387aeb49a4f81ecaa87fd481a310b"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><b>m_src_file</b></td></tr>
<tr class="separator:aa55387aeb49a4f81ecaa87fd481a310b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb5f59ed9b9bfa377f8f4afab470653b"><td class="memItemLeft" align="right" valign="top"><a id="aeb5f59ed9b9bfa377f8f4afab470653b"></a>
uint&#160;</td><td class="memItemRight" valign="bottom"><b>m_src_line</b></td></tr>
<tr class="separator:aeb5f59ed9b9bfa377f8f4afab470653b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p class="">A pending metadata lock request.</p>
<p class="">A lock request and a granted metadata lock are represented by different classes because they have different allocation sites and hence different lifetimes. The allocation of lock requests is controlled from outside of the MDL subsystem, while allocation of granted locks (tickets) is controlled within the MDL subsystem.</p>
<p class=""><a class="el" href="classMDL__request.html">MDL_request</a> is a C structure, you don't need to call a constructor or destructor for it. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a4e16a57d0955ac62887ff87d46dee5ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e16a57d0955ac62887ff87d46dee5ad">&#9670;&nbsp;</a></span>init_by_key_with_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_request::init_by_key_with_source </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structMDL__key.html">MDL_key</a> *&#160;</td>
          <td class="paramname"><em>key_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum_mdl_type&#160;</td>
          <td class="paramname"><em>mdl_type_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum_mdl_duration&#160;</td>
          <td class="paramname"><em>mdl_duration_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>src_line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Initialize a lock request using pre-built <a class="el" href="structMDL__key.html">MDL_key</a>.</p>
<dl class="section see"><dt>See also</dt><dd>MDL_request::init(namespace, db, name, type).</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key_arg</td><td>The pre-built MDL key for the request. </td></tr>
    <tr><td class="paramname">mdl_type_arg</td><td>The MDL lock type for the request. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab04208d9a63353d65b5384b2352657ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab04208d9a63353d65b5384b2352657ea">&#9670;&nbsp;</a></span>init_with_source()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_request::init_with_source </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMDL__key.html#a391ec4bd98fec6852a48f7856546ed3b">MDL_key::enum_mdl_namespace</a>&#160;</td>
          <td class="paramname"><em>mdl_namespace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>db_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum_mdl_type&#160;</td>
          <td class="paramname"><em>mdl_type_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum_mdl_duration&#160;</td>
          <td class="paramname"><em>mdl_duration_arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint&#160;</td>
          <td class="paramname"><em>src_line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Initialize a lock request.</p>
<p class="">This is to be used for every lock request.</p>
<p class="">Note that initialization and allocation are split into two calls. This is to allow flexible memory management of lock requests. Normally a lock request is stored in statement memory (e.g. is a member of struct <a class="el" href="structTABLE__LIST.html">TABLE_LIST</a>), but we would also like to allow allocation of lock requests in other memory roots, for example in the grant subsystem, to lock privilege tables.</p>
<p class="">The MDL subsystem does not own or manage memory of lock requests.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mdl_namespace</td><td>Id of namespace of object to be locked </td></tr>
    <tr><td class="paramname">db</td><td>Name of database to which the object belongs </td></tr>
    <tr><td class="paramname">name</td><td>Name of of the object </td></tr>
    <tr><td class="paramname">mdl_type</td><td>The MDL lock type for the request. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0464ab737f8f687f27626d2595a7125a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0464ab737f8f687f27626d2595a7125a">&#9670;&nbsp;</a></span>is_ddl_or_lock_tables_lock_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MDL_request::is_ddl_or_lock_tables_lock_request </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Is this a request for a strong, DDL/LOCK TABLES-type, of lock? </p>

</div>
</div>
<a id="a2eba1fb8ec80fc083ddee0b45c683294"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eba1fb8ec80fc083ddee0b45c683294">&#9670;&nbsp;</a></span>is_write_lock_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool MDL_request::is_write_lock_request </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Is this a request for a lock which allow data to be updated?</p>
<dl class="section note"><dt>Note</dt><dd>This method returns true for MDL_SHARED_UPGRADABLE type of lock. Even though this type of lock doesn't allow updates it will always be upgraded to one that does. </dd></dl>

</div>
</div>
<a id="a6cc77971b2b370098d3e6d89f816180e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cc77971b2b370098d3e6d89f816180e">&#9670;&nbsp;</a></span>set_type()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void MDL_request::set_type </td>
          <td>(</td>
          <td class="paramtype">enum_mdl_type&#160;</td>
          <td class="paramname"><em>type_arg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p class="">Set type of lock request. Can be only applied to pending locks. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a1bbba71916cc45c7a3912175ef76cf69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bbba71916cc45c7a3912175ef76cf69">&#9670;&nbsp;</a></span>duration</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum enum_mdl_duration MDL_request::duration</td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Duration for requested lock. </p>

</div>
</div>
<a id="ab30e06e36d9191120575cc0c0402554a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab30e06e36d9191120575cc0c0402554a">&#9670;&nbsp;</a></span>key</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMDL__key.html">MDL_key</a> MDL_request::key</td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">A lock is requested based on a fully qualified name and type. </p>

</div>
</div>
<a id="ad9d3b3f440b67b7665b3a2701a14e2b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9d3b3f440b67b7665b3a2701a14e2b2">&#9670;&nbsp;</a></span>next_in_list</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMDL__request.html">MDL_request</a>* MDL_request::next_in_list</td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Pointers for participating in the list of lock requests for this context. </p>

</div>
</div>
<a id="a99421002fe2ea1580766846c0ef339ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99421002fe2ea1580766846c0ef339ae">&#9670;&nbsp;</a></span>ticket</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classMDL__ticket.html">MDL_ticket</a>* MDL_request::ticket</td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Pointer to the lock ticket object for this lock request. Valid only if this lock request is satisfied. </p>

</div>
</div>
<a id="a13f9ecefea91a5355e694339ed9f7943"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13f9ecefea91a5355e694339ed9f7943">&#9670;&nbsp;</a></span>type</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum enum_mdl_type MDL_request::type</td>
        </tr>
      </table>
</div><div class="memdoc">
<p class="">Type of metadata lock. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="mdl_8h_source.html">mdl.h</a></li>
<li>mdl.cc</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
